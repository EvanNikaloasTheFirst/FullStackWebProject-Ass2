<?phpnamespace jobs\Controllers;//session_start();class User{    private $jobTable;    private $userTable;    private $enquiry;    private $categoriesTable;    public function __construct($userTable)    {        $this->userTable = $userTable;    }    public function login()    {        return ['templates' => 'login.html.php',            'title' => 'Log in',            'variables' => [            ]        ];    }    public function loginSubmit()    {        if(isset($_POST['submit'])) {            $user = $this->userTable->find('username', $_POST['username'])[0];            if (($user['username'] == $_POST['username']) && $user['password'] == $_POST['password'] && $user['Admin'] == 'Y') {                $_SESSION['AdminLoggedIn'] = true;                $_SESSION['userId'] = $user['id'];            } else if (($user['username'] == $_POST['username'])                && $user['password'] == $_POST['password'] && $user['Staff'] == 'Y') {                $_SESSION['StaffLoggedIn'] = true;                $_SESSION['userId'] = $user['id'];            } else if (($user['username'] == $_POST['username'])                && $user['password'] == $_POST['password'] && $user['Client'] == 'Y') {                $_SESSION['ClientLoggedIn'] = true;                $_SESSION['userId'] = $user['id'];            }            else{                echo'<p> Invalid details</p>';            }        }        return ['templates' => 'login.html.php',            'title' => 'Log in',            'variables' => ['user' => $user,            ]        ];    }    public function logout(){       unset( $_SESSION['AdminLoggedIn']);        unset($_SESSION['StaffLoggedIn']);        unset($_SESSION['ClientLoggedIn']);        $_SESSION['userId'] = null;        return ['templates' => 'logout.html.php',            'title' => 'All staff member',            'variables' => [            ]        ];    }    public function staffList(){        $staff = $this->userTable->findAll();        return ['templates' => 'StaffList.html.php',            'title' => 'All staff member',            'variables' => [                'staff' => $staff            ]        ];    }    public function deleteStaff() {        $this->UserTable->delete($_GET['id']);        header('location: /admin/staffList');    }//    public function delete() {//        $this->jobTable->delete($_GET['id']);////        header('location: /job/locationslist');//    }////    public function archive() {//        $this->jobTable->archive($_GET['id']);//        header('location: /admin/list');//    }////    public function unarchive()//    {//        $this->jobTable->unarchive($_GET['id']);//        header('location: /User/list');//    }    public function grantAccess()    {        $table = 'user';        $columns = 'Admin';        $this->userTable->grantAccess($table, $columns);        header('location: /User/stafflist');    }    public function removeAccess(){        $table = 'user';        $columns = 'Admin';        $this->userTable->removeAccess($table,$columns);        header('location: /User/stafflist');    }    public function edit(){    }    public function registerSubmit(){        if(isset($_POST['submit'])) {            $user = ['firstname' => $_POST['firstname'],                'surname'=> $_POST['surname'],                'password' =>$_POST['password'],                'username' => $_POST['username'],                'Admin' => $_POST['Admin'],                'staff' => $_POST['Staff'],                'client' => $_POST['Client']];            $newUser = $this->userTable->insert($user);        }        return ['templates' => 'userAdded.html.php',            'title' => 'All user',            'variables' => ['user' => $user            ]        ];    }//    public function enquiries(){////       $allEnquiries = $this->enquiry->findAll();////        return ['templates' => 'allEnquiries.html.php',//            'title' => 'All user',//            'variables' => ['allEnquiries' => $allEnquiries////            ]];//    }//    public function RespondToenquiries(){//        $user = $this->enquiry->find('id', $_GET['id']);////        return ['templates' => 'EnquiryResponse.html.php',//            'title' => 'All user',//            'variables' => ['user' => $user////            ]];////    }//    public function RespondToenquiriesSubmit(){////        if (isset($_POST['submit'])) {////            $updateResponse =//                ['id' => $_POST['id'],//                    'name' => $_POST['name'],//                    'email' => $_POST['email'],//                    'EnquiryResponse' => $_POST['response'],//                    'Staffid' => $_SESSION['userId'],//                    'completed' => $_POST['completed']////                ];//            $response = $this->enquiry->update($updateResponse);//        }////        $success = 'Your enquiry has been added';//        return ['templates' => 'submissionPage.html.php',//            'title' => 'Add a job',//            'variables' => ['success' => $success//            ]//        ];////    }}