<?phpnamespace jobs\Controllers;//session_start();class User{    private $jobTable;    private $userTable;    public function __construct($userTable,$jobTable)    {        $this->jobTable = $jobTable;        $this->userTable = $userTable;    }    public function login()    {        return ['templates' => 'login.html.php',            'title' => 'Log in',            'variables' => [            ]        ];    }    public function loginSubmit()    {        if(isset($_POST['submit'])) {            $user = $this->userTable->find('username', $_POST['username'])[0];            if (($user['username'] == $_POST['username']) && $user['password'] == $_POST['password'] && $user['Admin'] == 'Y') {                $_SESSION['AdminLoggedIn'] = true;                $_SESSION['userId'] = $user['id'];            } else if (($user['username'] == $_POST['username'])                && $user['password'] == $_POST['password'] && $user['Staff'] == 'Y') {                $_SESSION['StaffLoggedIn'] = true;                $_SESSION['userId'] = $user['id'];            } else if (($user['username'] == $_POST['username'])                && $user['password'] == $_POST['password'] && $user['Client'] == 'Y') {                $_SESSION['ClientLoggedIn'] = true;                $_SESSION['userId'] = $user['id'];            }            else{                echo'<p> Invalid details</p>';            }        }        return ['templates' => 'login.html.php',            'title' => 'Log in',            'variables' => ['user' => $user,            ]        ];    }    public function logout(){//        session_start()       unset( $_SESSION['AdminLoggedIn']);        unset($_SESSION['StaffLoggedIn']);        unset($_SESSION['ClientLoggedIn']);        $_SESSION['userId'] = null;//        var_dump($_SESSION);        return ['templates' => 'logout.html.php',            'title' => 'All staff member',            'variables' => [            ]        ];    }    public function staffList(){        $staff = $this->userTable->findAll();        return ['templates' => 'StaffList.html.php',            'title' => 'All staff member',            'variables' => [                'staff' => $staff            ]        ];    }    public function delete() {        $this->jobTable->delete($_GET['id']);        header('location: /job/locationslist');    }    public function deleteStaff() {        $this->UserTable->delete($_GET['id']);        header('location: /admin/staffList');    }    public function archive() {        $this->jobTable->archive($_GET['id']);        header('location: /admin/list');    }    public function unarchive()    {        $this->jobTable->unarchive($_GET['id']);        header('location: /User/list');    }    public function grantAccess()    {        $this->userTable->grantAccess($_GET['id']);        header('location: /User/stafflist');    }    public function removeAccess(){        $this->userTable->removeAccess($_GET['id']);        header('location: /User/stafflist');    }    public function edit(){    }    public function register(){        return ['templates' => 'addUser.html.php',            'title' => 'All user',            'variables' => [            ]        ];    }    public function registerSubmit(){        if(isset($_POST['submit'])) {            $user = ['firstname' => $_POST['firstname'],                'surname'=> $_POST['surname'],                'password' =>$_POST['password'],                'username' => $_POST['username'],                'Admin' => $_POST['Admin'],                'staff' => $_POST['Staff'],                'client' => $_POST['Client']];            $newUser = $this->userTable->insert($user);        }        return ['templates' => 'userAdded.html.php',            'title' => 'All user',            'variables' => ['user' => $user            ]        ];    }}